{"primaryContentSections":[{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The central data type of automerge is a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document"},{"type":"text","text":" which presents a data model somewhat similar to JSON, with string keyed maps and sequences which can be nested within one another. Unlike JSON a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document"},{"type":"text","text":" is a CRDT which means it can be merged with any other "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document"},{"type":"text","text":" in a manner which preserves user intent as much as possible. This means that when you have multiple users (or even just multiple devices for one user) working on the same data you can synchronise their changes without necessarily needing a central server."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Being able to merge changes is not much use without some way to transfer changes to other peers. You can send the entire document to other devices (and this will be compact and often a good workflow), but automerge also provides a sync protocol for efficiently getting in sync and staying in sync, which may be more appropriate for real-time collaborative applications and\/or applications with very large data sets."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"As a developer then you will likely have two concerns:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Creating, modifying, and reading data in a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Saving, loading, and synchronising documents with other devices"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"We’ll get to those in a second, but first let’s introduce the data model."}]},{"style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This library provides a fairly low level interface to automerge documents. There are no mappings from complex swift datatypes like structs or classees to the structure of the automerge document. It is intended that such higher level wrappers be built on top of this one as separate libraries."}]}],"type":"aside","name":"Note"},{"anchor":"Data-Model","level":2,"type":"heading","text":"Data Model"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Automerge documents are composed of “objects” - which are composite data structures like a map or a list - and primitive values like booleans and numbers. Objects have an "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjId"},{"type":"text","text":", which is used to refer to them when making changes to them. Every automerge document starts with the “root” object, which is a map identified by "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjId\/ROOT"},{"type":"text","text":". The data model (which is represeented in this library by the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Value"},{"type":"text","text":" enum), is the following:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Objects ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjType"},{"type":"text","text":"):"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Maps ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjType\/Map"},{"type":"text","text":"): string keyed maps"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Lists ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjType\/List"},{"type":"text","text":"): sequences of other automerge values"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Text ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjType\/Text"},{"type":"text","text":"): sequences of unicode characters"}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Primitive values ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue"},{"type":"text","text":")"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"byte arrays ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Bytes(_:)"},{"type":"text","text":")"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"strings ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/String(_:)"},{"type":"text","text":")"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"unsigned integers ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Uint(_:)"},{"type":"text","text":")"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"signed integers ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Int(_:)"},{"type":"text","text":")"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"floating point numbers ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/F64(_:)"},{"type":"text","text":")"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"counters ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Counter(_:)"},{"type":"text","text":")"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"timestamps ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Timestamp(_:)"},{"type":"text","text":")"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"booleans ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Boolean(_:)"},{"type":"text","text":")"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"null ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Null"},{"type":"text","text":")"}]}]}]}]}]},{"anchor":"Reading-and-writing-from-a-document","level":2,"type":"heading","text":"Reading and writing from a document"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Most operations you perform on a document require that you identify a property of an object. This is either a key of a map, or an index in a sequence. This is represented by overloaded functions which accept either a "},{"type":"codeVoice","code":"key:"},{"type":"text","text":" paramter or an "},{"type":"codeVoice","code":"index:"},{"type":"text","text":" parameter. For example, "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/get(obj:key:)"},{"type":"text","text":" to get a value out of a map and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/get(obj:index:)"},{"type":"text","text":" to get a value out of a list."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Methods which insert an object into the document are separate to those which insert primitive values (see "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/put(obj:key:value:)"},{"type":"text","text":" vs "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/putObject(obj:key:ty:)"},{"type":"text","text":"). This is because methods which insert an object return the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjId"},{"type":"text","text":" of the newly created object which can then be used to modify the contents of the new object. See the documentation of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document"},{"type":"text","text":" for more details on the individual methods."}]},{"anchor":"Saving-loading-and-syncing","level":2,"type":"heading","text":"Saving, loading, and syncing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"An automerge document can be saved using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/save()"},{"type":"text","text":". This will produce a compressed encoding of the document which is extremely efficient and which can be loaded using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/init(_:)"},{"type":"text","text":". In many cases you know that the other end already has some set of changes and you just want to send “new” changes. You can obtain these changes using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/encodeNewChanges()"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/encodeChangesSince(heads:)"},{"type":"text","text":". On the other end of the wire you can apply changes using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/applyEncodedChanges(encoded:)"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"As well as these options automerge also offers a sync protocol. The sync protocol is intended to be run over a reliable in-order connection between two peers. To use the sync protocol you instantiate a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/SyncState"},{"type":"text","text":" representing the peer you are connecting with and then generate messages to send to them using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/generateSyncMessage(state:)"},{"type":"text","text":" and receive messages from them using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/receiveSyncMessage(state:message:)"},{"type":"text","text":"."}]},{"anchor":"Heads-and-change-hashes","level":2,"type":"heading","text":"Heads and change hashes"},{"type":"paragraph","inlineContent":[{"type":"text","text":"An automerge document is a little like a git repository in that it is composed of a graph of changes which are identified by a hash. This means that like a git repository a point in the history of an automerge document can be referenced by its hash. "},{"type":"emphasis","inlineContent":[{"type":"text","text":"unlike"}]},{"type":"text","text":" a git repository an automerge document can have multiple heads for a given point in time, representing a merge of concurrent changes."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"From time to time you may want to refer to a particular point in the document history - to read values as at that point, or to get the changes since that time. "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/heads()"},{"type":"text","text":" can be used to obtain the current heads of the document, and there are families of methods on document which accept "},{"type":"codeVoice","code":"Array[ChangeHash]"},{"type":"text","text":" (which is returned by "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/heads()"},{"type":"text","text":")."}]},{"anchor":"Getting-notified-of-remote-changes","level":2,"type":"heading","text":"Getting notified of remote changes"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you apply changes received from a remote document (or merged from a separate local document) you may need to know what changed as a result of those changes so that you can update your UI. Any document method which accepts remote changes has a "},{"type":"codeVoice","code":"*WithPatches"},{"type":"text","text":" variant which returns an array of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Patch"},{"type":"text","text":"es, representing the change."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/automerge"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"A library which provides fast implementations of several different CRDTs, a compact compression format for these CRDTs, and a sync protocol for efficiently transmitting those changes over the network."}],"kind":"symbol","metadata":{"roleHeading":"Framework","externalID":"Automerge","title":"Automerge","symbolKind":"module","role":"collection","modules":[{"name":"Automerge"}]},"hierarchy":{"paths":[[]]},"topicSections":[{"title":"Essentials","identifiers":["doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/AddressBookExample","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document"]},{"title":"Structures","identifiers":["doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ActorId","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ChangeHash","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/DecodeSyncStateError","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/DeleteSeq","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/DocError","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/LoadError","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjId","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Patch","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/PathElement","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ReceiveSyncError","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/SyncState"]},{"title":"Enumerations","identifiers":["doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjType","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/PatchAction","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Prop","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue","doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Value"]}],"references":{"doc://org.automerge.Automerge/documentation/Automerge/ObjType/Map":{"role":"symbol","title":"ObjType.Map","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"Map"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjType\/Map","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/objtype\/map"},"doc://org.automerge.Automerge/documentation/Automerge/ScalarValue/Uint(_:)":{"role":"symbol","title":"ScalarValue.Uint(_:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"Uint"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"UInt64","preciseIdentifier":"s:s6UInt64V"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Uint(_:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/scalarvalue\/uint(_:)"},"doc://org.automerge.Automerge/documentation/Automerge/Document/generateSyncMessage(state:)":{"role":"symbol","title":"generateSyncMessage(state:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"generateSyncMessage"},{"kind":"text","text":"("},{"kind":"externalParam","text":"state"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"SyncState","preciseIdentifier":"s:9Automerge9SyncStateV"},{"kind":"text","text":") -> ["},{"kind":"typeIdentifier","text":"UInt8","preciseIdentifier":"s:s5UInt8V"},{"kind":"text","text":"]?"}],"abstract":[{"type":"text","text":"Generate a sync message to send to the peer represented by "},{"type":"codeVoice","code":"state"}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/generateSyncMessage(state:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/document\/generatesyncmessage(state:)"},"doc://org.automerge.Automerge/documentation/Automerge/ScalarValue/Bytes(_:)":{"role":"symbol","title":"ScalarValue.Bytes(_:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"Bytes"},{"kind":"text","text":"(["},{"kind":"typeIdentifier","text":"UInt8","preciseIdentifier":"s:s5UInt8V"},{"kind":"text","text":"])"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Bytes(_:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/scalarvalue\/bytes(_:)"},"doc://org.automerge.Automerge/documentation/Automerge/AddressBookExample":{"role":"article","title":"Address Book Example","abstract":[{"type":"text","text":"Building a CLI address book application using automerge."}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/AddressBookExample","kind":"article","type":"topic","url":"\/documentation\/automerge\/addressbookexample"},"doc://org.automerge.Automerge/documentation/Automerge/PatchAction":{"role":"symbol","title":"PatchAction","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"PatchAction"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/PatchAction","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"PatchAction"}],"url":"\/documentation\/automerge\/patchaction"},"doc://org.automerge.Automerge/documentation/Automerge/DecodeSyncStateError":{"role":"symbol","title":"DecodeSyncStateError","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"DecodeSyncStateError"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/DecodeSyncStateError","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DecodeSyncStateError"}],"url":"\/documentation\/automerge\/decodesyncstateerror"},"doc://org.automerge.Automerge/documentation/Automerge/Document/heads()":{"role":"symbol","title":"heads()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"heads"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"Set","preciseIdentifier":"s:Sh"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"ChangeHash","preciseIdentifier":"s:9Automerge10ChangeHashV"},{"kind":"text","text":">"}],"abstract":[{"type":"text","text":"Returns: a sequence of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Patch"},{"type":"text","text":" representing the changes which were"},{"type":"text","text":" "},{"type":"text","text":"made to the document as a result of the merge"}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/heads()","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/document\/heads()"},"doc://org.automerge.Automerge/documentation/Automerge/Document":{"role":"symbol","title":"Document","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Document"}],"abstract":[{"type":"text","text":"The entry point to automerge, a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document"},{"type":"text","text":" presents a key\/value interface to"},{"type":"text","text":" "},{"type":"text","text":"the data it contains; as well as methods for loading and saving documents, and"},{"type":"text","text":" "},{"type":"text","text":"taking part in the sync protocol."}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Document"}],"url":"\/documentation\/automerge\/document"},"doc://org.automerge.Automerge/documentation/Automerge/ObjType/Text":{"role":"symbol","title":"ObjType.Text","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"Text"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjType\/Text","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/objtype\/text"},"doc://org.automerge.Automerge/documentation/Automerge/PathElement":{"role":"symbol","title":"PathElement","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"PathElement"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/PathElement","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"PathElement"}],"url":"\/documentation\/automerge\/pathelement"},"doc://org.automerge.Automerge/documentation/Automerge/ObjId/ROOT":{"role":"symbol","title":"ROOT","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"ROOT"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ObjId","preciseIdentifier":"s:9Automerge5ObjIdV"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjId\/ROOT","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/objid\/root"},"doc://org.automerge.Automerge/documentation/Automerge/Document/receiveSyncMessage(state:message:)":{"role":"symbol","title":"receiveSyncMessage(state:message:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"receiveSyncMessage"},{"kind":"text","text":"("},{"kind":"externalParam","text":"state"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"SyncState","preciseIdentifier":"s:9Automerge9SyncStateV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"message"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"UInt8","preciseIdentifier":"s:s5UInt8V"},{"kind":"text","text":"]) "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Receive a sync message from the peer represented by "},{"type":"codeVoice","code":"state"}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/receiveSyncMessage(state:message:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/document\/receivesyncmessage(state:message:)"},"doc://org.automerge.Automerge/documentation/Automerge/ScalarValue":{"role":"symbol","title":"ScalarValue","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"ScalarValue"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ScalarValue"}],"url":"\/documentation\/automerge\/scalarvalue"},"doc://org.automerge.Automerge/documentation/Automerge/ScalarValue/F64(_:)":{"role":"symbol","title":"ScalarValue.F64(_:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"F64"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"Double","preciseIdentifier":"s:Sd"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/F64(_:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/scalarvalue\/f64(_:)"},"doc://org.automerge.Automerge/documentation/Automerge/ScalarValue/String(_:)":{"role":"symbol","title":"ScalarValue.String(_:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"String"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/String(_:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/scalarvalue\/string(_:)"},"doc://org.automerge.Automerge/documentation/Automerge/ScalarValue/Timestamp(_:)":{"role":"symbol","title":"ScalarValue.Timestamp(_:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"Timestamp"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"Int64","preciseIdentifier":"s:s5Int64V"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Timestamp(_:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/scalarvalue\/timestamp(_:)"},"doc://org.automerge.Automerge/documentation/Automerge/ObjType/List":{"role":"symbol","title":"ObjType.List","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"List"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjType\/List","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/objtype\/list"},"doc://org.automerge.Automerge/documentation/Automerge/ObjId":{"role":"symbol","title":"ObjId","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ObjId"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjId","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ObjId"}],"url":"\/documentation\/automerge\/objid"},"doc://org.automerge.Automerge/documentation/Automerge/Document/encodeChangesSince(heads:)":{"role":"symbol","title":"encodeChangesSince(heads:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"encodeChangesSince"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"Heads"},{"kind":"text","text":">("},{"kind":"externalParam","text":"heads"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Heads","preciseIdentifier":"s:9Automerge8DocumentC18encodeChangesSince5headsSays5UInt8VGx_tKSlRzAA10ChangeHashV7ElementRtzlF5HeadsL_xmfp"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> ["},{"kind":"typeIdentifier","text":"UInt8","preciseIdentifier":"s:s5UInt8V"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"Encode any changes made since "},{"type":"codeVoice","code":"heads"}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/encodeChangesSince(heads:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/document\/encodechangessince(heads:)"},"doc://org.automerge.Automerge/documentation/Automerge/Value":{"role":"symbol","title":"Value","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"Value"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Value","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Value"}],"url":"\/documentation\/automerge\/value"},"doc://org.automerge.Automerge/documentation/Automerge/ScalarValue/Boolean(_:)":{"role":"symbol","title":"ScalarValue.Boolean(_:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"Boolean"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Boolean(_:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/scalarvalue\/boolean(_:)"},"doc://org.automerge.Automerge/documentation/Automerge/ChangeHash":{"role":"symbol","title":"ChangeHash","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ChangeHash"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ChangeHash","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ChangeHash"}],"url":"\/documentation\/automerge\/changehash"},"doc://org.automerge.Automerge/documentation/Automerge/Patch":{"role":"symbol","title":"Patch","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Patch"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Patch","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Patch"}],"url":"\/documentation\/automerge\/patch"},"doc://org.automerge.Automerge/documentation/Automerge/ScalarValue/Null":{"role":"symbol","title":"ScalarValue.Null","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"Null"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Null","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/scalarvalue\/null"},"doc://org.automerge.Automerge/documentation/Automerge/Document/get(obj:key:)":{"role":"symbol","title":"get(obj:key:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"get"},{"kind":"text","text":"("},{"kind":"externalParam","text":"obj"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ObjId","preciseIdentifier":"s:9Automerge5ObjIdV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"key"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Value","preciseIdentifier":"s:9Automerge5ValueO"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Get the value at "},{"type":"codeVoice","code":"key"},{"type":"text","text":" from the map "},{"type":"codeVoice","code":"obj"}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/get(obj:key:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/document\/get(obj:key:)"},"doc://org.automerge.Automerge/documentation/Automerge/Document/encodeNewChanges()":{"role":"symbol","title":"encodeNewChanges()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"encodeNewChanges"},{"kind":"text","text":"() -> ["},{"kind":"typeIdentifier","text":"UInt8","preciseIdentifier":"s:s5UInt8V"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"Encode any changes since the last call to "},{"type":"codeVoice","code":"encodeNewChanges"}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/encodeNewChanges()","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/document\/encodenewchanges()"},"doc://org.automerge.Automerge/documentation/Automerge/DeleteSeq":{"role":"symbol","title":"DeleteSeq","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"DeleteSeq"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/DeleteSeq","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DeleteSeq"}],"url":"\/documentation\/automerge\/deleteseq"},"doc://org.automerge.Automerge/documentation/Automerge/Document/save()":{"role":"symbol","title":"save()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"save"},{"kind":"text","text":"() -> ["},{"kind":"typeIdentifier","text":"UInt8","preciseIdentifier":"s:s5UInt8V"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"Encode this document in a compressed binary format"}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/save()","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/document\/save()"},"doc://org.automerge.Automerge/documentation/Automerge/ScalarValue/Int(_:)":{"role":"symbol","title":"ScalarValue.Int(_:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"Int"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"Int64","preciseIdentifier":"s:s5Int64V"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Int(_:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/scalarvalue\/int(_:)"},"doc://org.automerge.Automerge/documentation/Automerge/SyncState":{"role":"symbol","title":"SyncState","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"SyncState"}],"abstract":[{"type":"text","text":"A synchronisation session with another peer"},{"type":"text","text":" "},{"type":"text","text":"The sync protocol is designed to run over a reliable in-order transport with"},{"type":"text","text":" "},{"type":"text","text":"the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/SyncState"},{"type":"text","text":" tracking the state between successive calls to"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/generateSyncMessage(state:)"},{"type":"text","text":" and"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/receiveSyncMessage(state:message:)"},{"type":"text","text":". Assuming the existence of some"},{"type":"text","text":" "},{"type":"text","text":"network infrastructure for sending and receiving messages on the transport a"},{"type":"text","text":" "},{"type":"text","text":"loop to stay in sync might look like the following"}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/SyncState","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SyncState"}],"url":"\/documentation\/automerge\/syncstate"},"doc://org.automerge.Automerge/documentation/Automerge":{"role":"collection","title":"Automerge","abstract":[{"type":"text","text":"A library which provides fast implementations of several different CRDTs, a compact compression format for these CRDTs, and a sync protocol for efficiently transmitting those changes over the network."}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge","kind":"symbol","type":"topic","url":"\/documentation\/automerge"},"doc://org.automerge.Automerge/documentation/Automerge/Document/putObject(obj:key:ty:)":{"role":"symbol","title":"putObject(obj:key:ty:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"putObject"},{"kind":"text","text":"("},{"kind":"externalParam","text":"obj"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ObjId","preciseIdentifier":"s:9Automerge5ObjIdV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"key"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"ty"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ObjType","preciseIdentifier":"s:9Automerge7ObjTypeO"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"ObjId","preciseIdentifier":"s:9Automerge5ObjIdV"}],"abstract":[{"type":"text","text":"Set or update "},{"type":"codeVoice","code":"key"},{"type":"text","text":" in map "},{"type":"codeVoice","code":"obj"},{"type":"text","text":" to a new instance of "},{"type":"codeVoice","code":"ty"}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/putObject(obj:key:ty:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/document\/putobject(obj:key:ty:)"},"doc://org.automerge.Automerge/documentation/Automerge/LoadError":{"role":"symbol","title":"LoadError","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"LoadError"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/LoadError","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"LoadError"}],"url":"\/documentation\/automerge\/loaderror"},"doc://org.automerge.Automerge/documentation/Automerge/Document/put(obj:key:value:)":{"role":"symbol","title":"put(obj:key:value:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"put"},{"kind":"text","text":"("},{"kind":"externalParam","text":"obj"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ObjId","preciseIdentifier":"s:9Automerge5ObjIdV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"key"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"value"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ScalarValue","preciseIdentifier":"s:9Automerge11ScalarValueO"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Set or update the  value at "},{"type":"codeVoice","code":"key"},{"type":"text","text":" in the map "},{"type":"codeVoice","code":"obj"},{"type":"text","text":" to "},{"type":"codeVoice","code":"value"}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/put(obj:key:value:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/document\/put(obj:key:value:)"},"doc://org.automerge.Automerge/documentation/Automerge/ScalarValue/Counter(_:)":{"role":"symbol","title":"ScalarValue.Counter(_:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"Counter"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"Int64","preciseIdentifier":"s:s5Int64V"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ScalarValue\/Counter(_:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/scalarvalue\/counter(_:)"},"doc://org.automerge.Automerge/documentation/Automerge/Document/applyEncodedChanges(encoded:)":{"role":"symbol","title":"applyEncodedChanges(encoded:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"applyEncodedChanges"},{"kind":"text","text":"("},{"kind":"externalParam","text":"encoded"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"UInt8","preciseIdentifier":"s:s5UInt8V"},{"kind":"text","text":"]) "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Apply encoded changes to this document"}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/applyEncodedChanges(encoded:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/document\/applyencodedchanges(encoded:)"},"doc://org.automerge.Automerge/documentation/Automerge/Prop":{"role":"symbol","title":"Prop","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"Prop"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Prop","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Prop"}],"url":"\/documentation\/automerge\/prop"},"doc://org.automerge.Automerge/documentation/Automerge/ReceiveSyncError":{"role":"symbol","title":"ReceiveSyncError","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ReceiveSyncError"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ReceiveSyncError","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ReceiveSyncError"}],"url":"\/documentation\/automerge\/receivesyncerror"},"doc://org.automerge.Automerge/documentation/Automerge/Document/get(obj:index:)":{"role":"symbol","title":"get(obj:index:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"get"},{"kind":"text","text":"("},{"kind":"externalParam","text":"obj"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ObjId","preciseIdentifier":"s:9Automerge5ObjIdV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"index"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UInt64","preciseIdentifier":"s:s6UInt64V"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Value","preciseIdentifier":"s:9Automerge5ValueO"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Get the value at "},{"type":"codeVoice","code":"index"},{"type":"text","text":" from the list "},{"type":"codeVoice","code":"obj"}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/get(obj:index:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/document\/get(obj:index:)"},"doc://org.automerge.Automerge/documentation/Automerge/ActorId":{"role":"symbol","title":"ActorId","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ActorId"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ActorId","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ActorId"}],"url":"\/documentation\/automerge\/actorid"},"doc://org.automerge.Automerge/documentation/Automerge/DocError":{"role":"symbol","title":"DocError","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"DocError"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/DocError","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DocError"}],"url":"\/documentation\/automerge\/docerror"},"doc://org.automerge.Automerge/documentation/Automerge/Document/init(_:)":{"role":"symbol","title":"init(_:)","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"(["},{"kind":"typeIdentifier","text":"UInt8","preciseIdentifier":"s:s5UInt8V"},{"kind":"text","text":"]) "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Load the document in "},{"type":"codeVoice","code":"bytes"}],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/Document\/init(_:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/document\/init(_:)"},"doc://org.automerge.Automerge/documentation/Automerge/ObjType":{"role":"symbol","title":"ObjType","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"ObjType"}],"abstract":[],"identifier":"doc:\/\/org.automerge.Automerge\/documentation\/Automerge\/ObjType","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ObjType"}],"url":"\/documentation\/automerge\/objtype"}}}